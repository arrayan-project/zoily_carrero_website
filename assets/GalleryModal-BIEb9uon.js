import{r as s,k as t}from"./react-DxwSq1SJ.js";import{X as N,C as L,a as X,Z as A,i as D}from"./lucide-CPZ_WI7h.js";const K=({selectedImage:o,closeImage:p,prevImage:i,nextImage:n,modalContainerRef:l,isMobileView:v=!1})=>{const[k,m]=s.useState(1),[h,f]=s.useState(null),[j,x]=s.useState(!1),[r,E]=s.useState(o),[z,b]=s.useState(!0),c=()=>{x(!0),setTimeout(()=>{p(),x(!1)},300)};s.useEffect(()=>{if(o===r)return;b(!1);const e=setTimeout(()=>{E(o),b(!0)},200);return()=>clearTimeout(e)},[o,r]),s.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),s.useEffect(()=>{const e=a=>{a.key==="Escape"&&c(),a.key==="ArrowLeft"&&i(),a.key==="ArrowRight"&&n()},u=a=>{if(a.key!=="Tab")return;const g=l.current;if(!g)return;const d=g.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),y=d[0],w=d[d.length-1];a.shiftKey&&document.activeElement===y?(a.preventDefault(),w.focus()):!a.shiftKey&&document.activeElement===w&&(a.preventDefault(),y.focus())};return window.addEventListener("keydown",e),window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keydown",u)}},[c,i,n]);const C=e=>{f(e.touches[0].clientX)},T=e=>{if(h===null)return;const u=e.changedTouches[0].clientX,a=h-u;a>50?n():a<-50&&i(),f(null)},S=e=>{l.current&&e.target===l.current&&c()};return t.jsxs("div",{ref:l,onClick:S,onTouchStart:C,onTouchEnd:T,className:`fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm ${j?"modal-fade-out":"modal-animation"}`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-image",children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),c()},className:"absolute top-4 right-4 text-white hover:text-red-500 z-50","aria-label":"Cerrar galería",children:t.jsx(N,{size:32})}),!v&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),i()},className:"absolute left-4 text-white hover:text-pink-400 z-50","aria-label":"Imagen anterior",children:t.jsx(L,{size:40})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),n()},className:"absolute right-4 text-white hover:text-pink-400 z-50","aria-label":"Siguiente imagen",children:t.jsx(X,{size:40})})]}),t.jsxs("div",{className:"relative flex items-center justify-center max-w-full max-h-full modal-animation",onClick:e=>e.stopPropagation(),children:[t.jsx("h2",{id:"modal-title",className:"sr-only",children:"Vista ampliada de imagen"}),t.jsx("img",{id:"modal-image",src:r,alt:"Imagen seleccionada de galería",loading:"lazy",className:`object-contain h-auto max-h-[90vh] w-auto max-w-[95vw] transition-transform duration-300 modal-image-fade ${z?"visible":""}`,style:{transform:`scale(${k})`}},r),t.jsxs("div",{className:"absolute bottom-8 flex gap-4 z-40",children:[t.jsx("button",{onClick:()=>m(e=>Math.max(1,e-.2)),className:"text-white hover:text-pink-400","aria-label":"Alejar imagen",children:t.jsx(A,{size:28})}),t.jsx("button",{onClick:()=>m(e=>Math.min(2,e+.2)),className:"text-white hover:text-pink-400","aria-label":"Acercar imagen",children:t.jsx(D,{size:28})})]})]})]})};export{K as default};
